<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE-edge">
	<title>Chat Live</title>
	<link rel="stylesheet" href="">
</head>
<body>
	<!-- JQuery Web -->
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script> 
	<!-- JQuery Local 
	<script src="js/jquery-3.4.1.min.js"></script> -->
	<!-- Socket.io Local -->
	<script src="/socket.io/socket.io.js"></script>
	<!-- Archivos Locales JS -->
	<script src="functions_sockets.js"></script>

	<h3>Login</h3>
	<form accept-charset="utf-8" id="form_login">
		<input type=text name="" id="user" placeholder="User" value="">
		<input type=text name="" id="password" placeholder="Password" value="">
		<input type="button" value="Login" onclick="login()">
	</form>

	<br>
	<br>
	<br>

	<h3>Global Chat</h3>
	<div id="chat">
		<p><strong>Welcome to ChatLive</strong></p>
	</div>

	<br>
	
	<div style="display: flex; justify-content: flex-start; align-items: center">
		<textarea style="width: 500px" id=message placeholder="Message"></textarea>
		<input type="text" id="toSend" name="" placeholder="To Send">
		<button type="" id="send_message" onclick="send_message()" style="height: 100%; background: green; color: white; padding: 10px">Send</button>
	</div>

	<hr>
	<style>
		#chat {
			width: 50%; 
			background: #da2724; 
			border: solid 2px black
		}
		p {
			background: white;
			padding: 5px;
			border: solid 1px black;
			margin: 10px;
			border-radius: 5px
		}
	</style>
	<script>

		function login(){
	
			// Obtenemos los datos del form
			user = $('#form_login #user').val();
			password = $('#form_login #password').val();

			// Enviamos los datos al servidor
			login_socket(user, password);
		}

		function send_message(){

			// Obtenemos los datos del chat
			message = $('#message').val();
			toSend = $('#toSend').val();

			// Enviamos los datos al servidor
			if(toSend == '')
				send_message_socket(message, user);
			else
				send_message_socket(message, user, toSend);

			// Limpiamos el textarea
			$("#message").val("");

		}
		
	</script>
</body>
</html>
